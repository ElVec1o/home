---
import Base from '../layouts/Base.astro';
import breaksData from '../data/breaks.json';
import siteConfig from '../data/site-config.json';

const totalBreaks = breaksData.length;
const categories = [...new Set(breaksData.map(b => b.category.split(' ')[1]))];
const base = import.meta.env.BASE_URL;
---
<Base title={siteConfig.title}>
  <h1>{siteConfig.title}</h1>
  <p>{siteConfig.tagline}</p>

  <h2>About</h2>
  <p>{siteConfig.about1}</p>
  <p>{siteConfig.about2}</p>

  <h2>Stats</h2>
  <p>
    {totalBreaks} documented breaks<br>
    {categories.length} technique categories
  </p>

  <h2>Recent Work</h2>
  {breaksData.slice(0, 3).map(b => (
    <p>
      <strong>{b.name}</strong> — {b.technique}<br>
      <span class="meta">{b.challenge}</span>
    </p>
  ))}
  <p><a href={`${base}/breaks/`}>→ View all breaks</a></p>

  <h2>Links</h2>
  <p>
    <a href={`https://x.com/${siteConfig.xHandle}`} target="_blank">X/Twitter</a>
  </p>
  <p>
    <a href="https://app.grayswan.ai/arena/leaderboard/global" target="_blank">Gray Swan Arena Global Leaderboard</a> — competing as <strong>{siteConfig.grayswanUser}</strong>
  </p>
  <p class="admin-link">
    <a href={`${base}/admin.html`}>Admin</a>
  </p>
</Base>

<style>
  .admin-link {
    margin-top: 2rem;
    font-size: 0.85rem;
    opacity: 0.5;
  }
  .admin-link:hover {
    opacity: 1;
  }
</style>
